function createEngineSelectionBox(){"use strict";function a(a,b){var c=art("LABEL",art("INPUT",{style:{margin:"0 .25em 0 0"},type:"checkbox"},b),a||null);return c}function b(){var a=document.createEvent("Event");a.initEvent("input",!0,!1),j.dispatchEvent(a)}function c(a,b){var c=Object.create(null);return a.elementaryNames.forEach(function(a){c[a]=null}),b.forEach(function(a){delete c[a]}),a=JScrewIt.Feature(Object.keys(c))}function d(){var a=i.checked;Array.prototype.forEach.call(l,function(b){b.checked=a})}function e(){setTimeout(function(){i.indeterminate||d()})}function f(){var a,b,d=[],e=["ANY_DOCUMENT","ANY_WINDOW","DOCUMENT","DOMWINDOW","HTMLDOCUMENT","WINDOW"],f=0;Array.prototype.forEach.call(l,function(a){var b,c;a.checked&&(++f,b=a.feature,d.push(b),c=a.notForWebWorker,Array.prototype.push.apply(e,c))}),i.checked=f,i.indeterminate=f&&f<l.length,a=JScrewIt.Feature,b=a.commonOf.apply(null,d)||a.DEFAULT,m.checked&&(b=c(b,e)),k=b}function g(){var b=art(a("Select/deselect all"),{style:{display:"inline-block",margin:"0 0 .5em"}},art.on("change",d),art.on("keyup",e),art.on("mouseup",e)),c=art("TABLE",{style:{borderSpacing:"0",width:"100%"}}),g=a("Support web workers");j=art("FIELDSET",art("DIV",art("P",{style:{margin:".25em 0 .75em"}},"Select the engines you want your code to support."),b,c,art("HR"),g,art.on("change",h)),{get featureObj(){return k}}),n.forEach(function(b,d){var e,f,g,h,i=b.versions,j=1&d?{className:"engineFieldEven"}:null,k=(i.length+2)/3^0,l=3*k;for(f=0;l>f;++f)g=i[f],f%3||(e=art("TR",j),f||art(e,art("TD",{rowSpan:k,style:{padding:"0 .5em 0 0"}},b.name)),art(c,e)),h=g?a(g.number,{checked:!0,feature:g.feature,notForWebWorker:g.notForWebWorker}):null,art(e,art("TD",{style:{padding:"0 0 0 .5em",width:"6em"}},h))}),i=b.querySelector("INPUT"),l=c.querySelectorAll("INPUT"),m=g.querySelector("INPUT"),f()}function h(){f(),b()}var i,j,k,l,m,n=[{name:"Chrome",versions:[{feature:"CHROME45",number:"45+"}]},{name:"Internet Explorer",versions:[{feature:"IE9",number:"9"},{feature:"IE10",number:"10"},{feature:"IE11",number:"11"}]},{name:"Firefox",versions:[{feature:"FF31",number:"31+"}]},{name:"Safari",versions:[{feature:"SAFARI70",number:"7.0"},{feature:"SAFARI71",number:"7.1"},{feature:"SAFARI71",number:"8",notForWebWorker:["SELF_OBJ"]},{feature:"SAFARI90",number:"9",notForWebWorker:["SELF_OBJ"]}]},{name:"Opera",versions:[{feature:"CHROME45",number:"32+"}]},{name:"Microsoft Edge",versions:[{feature:"EDGE"}]},{name:"Android Browser",versions:[{feature:"ANDRO400",number:"4.0"},{feature:"ANDRO412",number:"4.1–4.3"},{feature:"ANDRO442",number:"4.4"}]},{name:"Node.js",versions:[{feature:"NODE010",number:"0.10"},{feature:"NODE012",number:"0.12"},{feature:"NODE40",number:"4+"}]}];return g(),j}function createRoll(){"use strict";function a(){var a=art("DIV");g=a.style,g.display="none",e=art("DIV",a),e.container=a,Object.defineProperty(e,"rollTo",{configurable:!0,value:c,writable:!0}),f=e.style,f.height="0",f.overflowY="hidden"}function b(){var a=+new Date,b=a-k;m=j+b*l/250,(m-h)*l>=0&&(m=h,d()),f.height=1===m?"":e.scrollHeight*m+"px",g.display=0===m?"none":""}function c(a){if(a===m)d();else{var c=a>m?1:-1;c!==l&&(j=m,k=+new Date,l=c),h=a,i||(i=setInterval(b,0))}}function d(){clearInterval(i),i=null,l=0}var e,f,g,h,i,j,k,l=0,m=0;return a(),e}!function(){"use strict";function a(c){var d,e,f,g,h;for(d=c instanceof Node?c:"function"==typeof c?c.call(a):document.createElement(c),e=arguments.length,f=0;++f<e;)g=arguments[f],g instanceof Node?d.appendChild(g):null!=g&&(h=typeof g,"object"===h?b(d,g):"function"===h?g.call(a,d):d.appendChild(document.createTextNode(g)));return d}function b(a,c){Object.keys(c).forEach(function(d){var e,f=Object.getOwnPropertyDescriptor(c,d);"value"in f?(e=f.value,d in a&&"object"==typeof e?b(a[d],e):a[d]=e):Object.defineProperty(a,d,f)})}a.on=function(a,b,c){function d(d){d.addEventListener(a,b,c)}return d},window.art=a}(),function(){"use strict";function createWorker(){if("undefined"!=typeof Worker)try{worker=new Worker("html/worker.js")}catch(a){}}function encode(){var a,b=getOptions();try{a=JScrewIt.encode(inputArea.value,b)}catch(c){return resetOutput(),void updateError(c+"")}updateOutput(a)}function encodeAsync(){var a=getOptions(),b={input:inputArea.value,options:a};waitingForWorker?queuedData=b:(worker.postMessage(b),resetOutput(),setWaitingForWorker(!0)),inputArea.onkeyup=null}function getOptions(){var a=wrapWithCallBox.checked?"call":"none",b={features:currentFeatureObj.canonicalNames,wrapWith:a};return b}function handleCompInput(){var a=compMenu.selectedIndex,b=compMenu.options[a].value,c=JScrewIt.Feature,d=b?c[b]:engineSelectionBox.featureObj;(outOfSync||!c.areEqual(d,currentFeatureObj))&&(currentFeatureObj=d,this()),a!==compMenu.previousIndex&&(compMenu.previousIndex=a,roll.rollTo(+!b))}function handleInputAreaKeyUp(a){"Tab"!==a.key&&encodeAsync()}function handleRun(){var value;try{value=eval(outputArea.value)}catch(error){alert(error)}"string"==typeof value&&alert('"'+value+'"')}function handleWorkerMessage(a){var b,c;queuedData?(worker.postMessage(queuedData),queuedData=null):(b=a.data,c=b.error,c?updateError(b.error):updateOutput(b.output),setWaitingForWorker(!1))}function init(){var a,b,c,d;document.querySelector("body>*>div").style.display="block",inputArea.value=inputArea.defaultValue,wrapWithCallBox.checked=wrapWithCallBox.defaultChecked,outputArea.oninput=updateStats,art(stats.parentNode,art("BUTTON","Run this",{style:{bottom:"0",fontSize:"10pt",margin:"0",position:"absolute",right:"0"}},art.on("click",handleRun))),b=controls.querySelector("button"),worker?(controls.removeChild(b),a=encodeAsync,worker.onmessage=handleWorkerMessage,encodeAsync()):(b.onclick=encode,a=noEncode,outputArea.value=""),inputArea.oninput=a,wrapWithCallBox.onchange=a,compMenu.selectedIndex=compMenu.previousIndex=0,c=handleCompInput.bind(a),compMenu.onchange=c,compMenu.onkeydown=setTimeout.bind(null,c),engineSelectionBox=art(createEngineSelectionBox(),{className:"engineSelectionBox"},art.on("input",c)),roll=createRoll(),art(roll.container,art("DIV",{className:"frame"},art("SPAN","Custom Compatibility Selection"),engineSelectionBox)),art(controls.parentNode,roll),inputArea.createTextRange?(d=inputArea.createTextRange(),d.move("textedit",1),d.select()):inputArea.setSelectionRange(2147483647,2147483647),inputArea.focus()}function noEncode(){outputSet&&updateStats(!0)}function resetOutput(){outputSet=!1,outputArea.value="",stats.textContent="…"}function setWaitingForWorker(a){waitingForWorker=a,outputArea.disabled=a}function updateError(a){alert(a)}function updateOutput(a){outputArea.value=a,updateStats()}function updateStats(a){var b=outputArea.value.length,c=1===b?"1 char":b+" chars";outOfSync=!!a,a&&(worker&&(inputArea.onkeyup=handleInputAreaKeyUp),c+=" – <i>out of sync</i>"),outputSet=!0,stats.innerHTML=c}var engineSelectionBox,outOfSync,outputSet,queuedData,roll,waitingForWorker,worker,currentFeatureObj=JScrewIt.Feature.DEFAULT;document.addEventListener("DOMContentLoaded",init),createWorker()}();